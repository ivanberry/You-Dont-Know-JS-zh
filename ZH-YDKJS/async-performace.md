# You Don't Know JS: Async & Performance
## Chapter 1: 异步：现在或以后

很是重要但也常被人误解的一点：怎么表达和维护需要一段时间程序，尤其像JavaScript这类语言。

这不仅仅是关于一个循环其实和结束，它可能需要一段时间，从毫秒到微秒甚至更长来完成。它也关于一部分程序现在执行，另一部分过一会才能执行，这两者之间有一段“间距”。

每种语言都有自己处理这种问题的方法，不管是等待用户的输入，从数据库或文件系统读取数据，通过网络发送数据并等待返回，又或者是特定次数的重复任务。这些情况里，程序都需要管理处于“间距”的状态，这和地铁站的”小心间隙”如出一辙。

实际上，“现在”和”之后”是异步编程的核心。

从JS诞生开始就又了异步编程的概念，不过并不是每一个编写者都自信考虑“如何，为什么”，或者探求其他能处理好的办法。一般都会采用”回调”的方式来解决。

但是在JS在使用范围和复杂的增长，异步编程变得迫不及待，人们急需更合理的方式。在之后的章节我们会探讨多种实现异步编程的方法，但是这之前，我们又必要先深入学习，理解“什么是异步编程”。

## 一堆代码

你很可能在一个‘js’文件写下‘一堆’代码，但是它总是会被分割成许多块，有一些会在当时执行，而另外一些只能在之后执行，最普遍的块形式是‘函数块’。

对于JS语言的新手而言，之后的执行并不会在现在执行后立刻执行，换句话说，不能在当前完成的任务将通过异步的方式完成，它不会如你所想阻塞其他的操作。考虑以下代码：

```js
// ajax(...) is some arbitrary Ajax function give by a library
var data = ajax('http://some.url.1');

console.log( data );
//Oops! `data` generally won't have the Ajax results
```
我们都清楚Ajax请求的实现是异步的，这就意味着，'ajax(..)'函数直到数据返回才会赋值给'data'，假如'ajax()'可以阻塞直到数据返回，到那时候'data'的赋值操作也能正常执行，但是，这不是实际的过程，我们在现在发起请求，并且只能“之后”才能得到我们需要的数据。

实现”等待”的最简单办法就是“回调函数”：

```js
ajax('http://some.url.1', function myCallbackFunction (data) {
	console.log(data);
});
```

⚠️： 你可能听说可以同步实现Ajax请求，但是建议你绝不使用这些方式，因为这会阻塞所有其他的操作，在阻塞的时间段里，你什么都不能做，因为它会锁死任何其他操作。
